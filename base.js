const twodArray = [
    [
        "2024-10-20",
        "9673",
        "China Express Air",
        "Juzhou",
        "Shenzhen"
    ], 
    [
        "2024-10-20",
        "8463",
        "China Airlines",
        "Kumamoto",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "1316",
        "Air India Express",
        "Indira Gandhi International",
        "Sanganeer"
    ],
    [
        "2024-10-20",
        "6193",
        "British Airways",
        "Doha International",
        "Noibai International"
    ],
    [
        "2024-10-20",
        null,
        "empty",
        "Albury",
        "Essendon"
    ],
    [
        "2024-10-20",
        "5287",
        "China Eastern Airlines",
        "Guangzhou Baiyun International",
        "Shanghai"
    ],
    [
        "2024-10-20",
        "129",
        "Silk Way West",
        "Heydar Aliyev International (Bina International)",
        "Seoul (Incheon)"
    ],
    [
        "2024-10-20",
        "7845",
        "Hainan Airlines",
        "Shanghai Pudong International",
        "Xianyang"
    ],
    [
        "2024-10-20",
        "4395",
        "Singapore Airlines",
        "Auckland International",
        "Hawkes Bay"
    ],
    [
        "2024-10-20",
        "808",
        "FlexFlight",
        "Nauru International",
        "Nadi International"
    ],
    [
        "2024-10-20",
        "282",
        "Air New Zealand",
        "Singapore Changi",
        "Auckland International"
    ],
    [
        "2024-10-20",
        "4282",
        "Singapore Airlines",
        "Singapore Changi",
        "Auckland International"
    ],
    [
        "2024-10-20",
        "7166",
        "Lufthansa",
        "Singapore Changi",
        "Auckland International"
    ],
    [
        "2024-10-20",
        "3238",
        "EVA Air",
        "Auckland International",
        "Queenstown"
    ],
    [
        "2024-10-20",
        "5552",
        "S7 Airlines",
        "Tolmachevo",
        "Dushanbe"
    ],
    [
        "2024-10-20",
        "740",
        "Aircalin",
        "Singapore Changi",
        "Tontouta"
    ],
    [
        "2024-10-20",
        "4022",
        "Air France",
        "Singapore Changi",
        "Tontouta"
    ],
    [
        "2024-10-20",
        "3719",
        "Sichuan Airlines",
        "Kuala Lumpur International Airport (klia)",
        null
    ],
    [
        "2024-10-20",
        "9039",
        "China Postal Airlines",
        "Changsha",
        "Chongqing Jiangbei International"
    ],
    [
        "2024-10-20",
        "9815",
        "Central Airlines",
        "Kansai International",
        "Zhengzhou"
    ],
    [
        "2024-10-20",
        "76",
        "Silk Way West",
        "Heydar Aliyev International (Bina International)",
        "Zhengzhou"
    ],
    [
        "2024-10-20",
        "7523",
        "Qantas",
        "Christchurch International",
        "Auckland International"
    ],
    [
        "2024-10-20",
        "1207",
        "9 Air Co",
        "Suvarnabhumi International",
        "Guiyang"
    ],
    [
        "2024-10-20",
        "106",
        "ANA",
        "Los Angeles International",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "843",
        "ANA",
        "Singapore Changi",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "351",
        "Hong Kong Air Cargo",
        "Ninoy Aquino International",
        "Hong Kong International"
    ],
    [
        "2024-10-20",
        "623",
        "Hong Kong Express",
        "Hong Kong International",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "1561",
        "AirAsia",
        "Kota-Kinabalu International Airport",
        "Beijing Daxing International Airport"
    ],
    [
        "2024-10-20",
        "2911",
        "Jiangsu Jingdong Cargo Airlines",
        "Suvarnabhumi International",
        "Chongqing Jiangbei International"
    ],
    [
        "2024-10-20",
        "849",
        "ANA",
        "Suvarnabhumi International",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "35",
        "Jet Linx Aviation",
        "Singapore Changi",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "313",
        "Emirates",
        "Dubai",
        "Haneda Airport"
    ],
    [
        "2024-10-20",
        "9051",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Haikou"
    ],
    [
        "2024-10-20",
        "9033",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Xianyang"
    ],
    [
        "2024-10-20",
        "3345",
        "SriLankan Airlines",
        "Suvarnabhumi International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "2488",
        "Shandong Airlines",
        "Xianyang",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "4170",
        "Bangkok Airways",
        "Suvarnabhumi International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "7341",
        "AlphaSky",
        "Suvarnabhumi International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "5378",
        "Hawaiian Airlines",
        "Suvarnabhumi International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "2474",
        "Shandong Airlines",
        "Chongqing Jiangbei International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "727",
        "JAL",
        "Suvarnabhumi International",
        "Kansai International"
    ],
    [
        "2024-10-20",
        "9017",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Kunming"
    ],
    [
        "2024-10-20",
        "6813",
        "SF Airlines",
        "Beijing Capital International",
        "Shenzhen"
    ],
    [
        "2024-10-20",
        "421",
        "China Southern Airlines",
        "Vancouver International",
        "Qingdao"
    ],
    [
        "2024-10-20",
        "156",
        "Cathay Pacific",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "3467",
        "Qatar Airways",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "5632",
        "Miat - Mongolian Airlines",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "7906",
        "Jet Linx Aviation",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "4146",
        "British Airways",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "5850",
        "Finnair",
        "Hong Kong International",
        "Brisbane International"
    ],
    [
        "2024-10-20",
        "176",
        "United Airlines",
        "Guam International",
        "Truk"
    ],
    [
        "2024-10-20",
        "1111",
        "9 Air Co",
        "Fenghuang International (Phoenix International)",
        "Guangzhou Baiyun International"
    ],
    [
        "2024-10-20",
        "1009",
        "9 Air Co",
        "Shanghai Pudong International",
        "Guangzhou Baiyun International"
    ],
    [
        "2024-10-20",
        "347",
        "China Southern Airlines",
        "Charles De Gaulle",
        "Guangzhou Baiyun International"
    ],
    [
        "2024-10-20",
        "9027",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Weifang"
    ],
    [
        "2024-10-20",
        "4012",
        "Longhao Airlines",
        "Zhengzhou",
        "Weihai"
    ],
    [
        "2024-10-20",
        "3817",
        "Tianjin Air Cargo",
        "Singapore Changi",
        "Nanning"
    ],
    [
        "2024-10-20",
        "3829",
        "Tianjin Air Cargo",
        "Ninoy Aquino International",
        "Nanning"
    ],
    [
        "2024-10-20",
        "3819",
        "Tianjin Air Cargo",
        "Tan Son Nhat International",
        "Nanning"
    ],
    [
        "2024-10-20",
        "3831",
        "Tianjin Air Cargo",
        "Ninoy Aquino International",
        "Nanning"
    ],
    [
        "2024-10-20",
        "3837",
        "Tianjin Air Cargo",
        "Mingaladon",
        "Nanning"
    ],
    [
        "2024-10-20",
        "9825",
        "Central Airlines",
        "Suvarnabhumi International",
        "Nanning"
    ],
    [
        "2024-10-20",
        "9039",
        "YTO Cargo Airlines",
        "Indira Gandhi International",
        "Nanning"
    ],
    [
        "2024-10-20",
        "9141",
        "YTO Cargo Airlines",
        "Madras International (Meenambakkam)",
        "Nanning"
    ],
    [
        "2024-10-20",
        "9057",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Chongqing Jiangbei International"
    ],
    [
        "2024-10-20",
        "9015",
        "YTO Cargo Airlines",
        "Noibai International",
        "Lishe International Airport"
    ],
    [
        "2024-10-20",
        "7267",
        "SF Airlines",
        "Guangzhou Baiyun International",
        "Lishe International Airport"
    ],
    [
        "2024-10-20",
        "4115",
        "Longhao Airlines",
        "Kansai International",
        "Lishe International Airport"
    ],
    [
        "2024-10-20",
        "4494",
        "Etihad Airways",
        "Auckland International",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "4427",
        "Etihad Airways",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "4311",
        "Singapore Airlines",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "4830",
        "Thai Airways International",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "8769",
        "Turkish Airlines",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "6795",
        "United Airlines",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "211",
        "Air New Zealand",
        "Melbourne - Tullamarine Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "5050",
        "Finnair",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "7424",
        "British Airways",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "5046",
        "Emirates",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "5016",
        "AlphaSky",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "7292",
        "American Airlines",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "138",
        "Qantas",
        "Sydney Kingsford Smith Airport",
        "Christchurch International"
    ],
    [
        "2024-10-20",
        "7974",
        "Suparna Airlines",
        "Shanghai Pudong International",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        "3829",
        "Tianjin Air Cargo",
        "Kansai International",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        "7919",
        "Suparna Airlines",
        "Hangzhou",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        "7406",
        "Suparna Airlines",
        "Shanghai Pudong International",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        "9101",
        "China Postal Airlines",
        "Nanjing Lukou International Airport",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        null,
        "Central Airlines",
        "Charles De Gaulle",
        "Tianjin Binhai International"
    ],
    [
        "2024-10-20",
        "4106",
        null,
        "Tan Son Nhat International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "4082",
        "FlexFlight",
        "Tan Son Nhat International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "5001",
        null,
        "Tan Son Nhat International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "9502",
        "SWISS",
        "Hong Kong International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "3488",
        "Qatar Airways",
        "Hong Kong International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "5612",
        "Miat - Mongolian Airlines",
        "Hong Kong International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "4140",
        "British Airways",
        "Hong Kong International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "5844",
        "Finnair",
        "Hong Kong International",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "5518",
        "Virgin Australia",
        "Singapore Changi",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "8218",
        "Vistara",
        "Singapore Changi",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "9311",
        "Turkish Airlines",
        "Singapore Changi",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "8068",
        "SAS",
        "Singapore Changi",
        "Melbourne - Tullamarine Airport"
    ],
    [
        "2024-10-20",
        "5485",
        "ANA",
        "Singapore Changi",
        "Melbourne - Tullamarine Airport"
    ]
]

var api_key = "06f91d722db50b514651123072946071";

async function initQ(){
    console.log("initQ");
    const url = "https://api.aviationstack.com/v1/flights?access_key=06f91d722db50b514651123072946071";
    const options = {
        method: "GET",
    };

    /*
    const response = await fetch(url, options);
    const apiResponse = await response.json();
    console.log(apiResponse.data[1]);

    let length = apiResponse.data.length;

    var parsedArray = new Array(length);

    for(let i = 0; i<length; i++){
        var subArray = new Array(4);
        subArray[0] = apiResponse.data[i].flight_date;
        subArray[1] = apiResponse.data[i].flight.number;
        subArray[2] = apiResponse.data[i].airline.name;
        subArray[3] = apiResponse.data[i].arrival.airport;
        subArray[4] = apiResponse.data[i].departure.airport;
        parsedArray[i] = subArray;
    }
    console.log(parsedArray);
    */
    
    const parsedArray  = twodArray;

    const uniqueParsedArray = [];
    for (let col = 0; col < parsedArray[0].length; col++) {
        const uniqueValues = new Set();
        for (const row of parsedArray) {
            if(row[col] !== null){
            const value = row[col].replaceAll(" ", "");//removes all spaces within value
            uniqueValues.add(value.trim());
            }
    }
    uniqueParsedArray.push(Array.from(uniqueValues));
}

    console.log(uniqueParsedArray);
    console.log("fufb");

    // Get the div where the checkboxes will be inserted
    const departureContainer = document.getElementById('depature-selections');
    const arrivalContainer = document.getElementById('arrivals-selections');
    const airlineContainer = document.getElementById('airline-selections');
    const dateContainer = document.getElementById('date-selections');

    arrivalContainer.setAttribute("style","display: none");
    airlineContainer.setAttribute("style","display: none");
    dateContainer.setAttribute("style","display: none");

    const checkboxMax = 10;
    
    
    // Generate checkboxes for departures
    for(let i = 0; i<uniqueParsedArray[4].length & i<checkboxMax; i++){
        content = uniqueParsedArray[4][i];
        // Create a label for the checkbox
        const label = document.createElement('label');
        label.innerHTML += `<input type="checkbox" name="options" onclick=selectionClick(${i}) value="${i}">${content}`;
        departureContainer.appendChild(label);
        departureContainer.appendChild(document.createElement('br')); // Line break for spacing
    };
    const nextButtonDepart = document.createElement('button')
    nextButtonDepart.textContent = "Next";
    nextButtonDepart.addEventListener('click', () => {//event listener to make departures disappear
        // Code to execute when the button is clicked
        departureContainer.setAttribute("style","display: none");
        arrivalContainer.setAttribute("style","display: block");
      });
      departureContainer.appendChild(document.createElement('br')); // Line break for spacing
    departureContainer.appendChild(nextButtonDepart);








     // Generate checkboxes for arrivals
     for(let i = 0; i<uniqueParsedArray[3].length & i<checkboxMax; i++){
        content = uniqueParsedArray[3][i];
        // Create a label for the checkbox
        const label = document.createElement('label');
        label.innerHTML += `
            <input type="checkbox" name="options" onclick=selectionClick(${i}) value="${i}">${content}`;
            arrivalContainer.appendChild(label);
        arrivalContainer.appendChild(document.createElement('br')); // Line break for spacing
    };
    const nextButtonArrival = document.createElement('button')
    nextButtonArrival.textContent = "Next";
    nextButtonArrival.addEventListener('click', () => {//event listener to make departures disappear
        // Code to execute when the button is clicked
        arrivalContainer.setAttribute("style","display: none");
        airlineContainer.setAttribute("style","display: block");
      });
      arrivalContainer.appendChild(document.createElement('br')); // Line break for spacing
    arrivalContainer.appendChild(nextButtonArrival);







     // Generate checkboxes for airline
     for(let i = 0; i<uniqueParsedArray[2].length & i<checkboxMax; i++){
        content = uniqueParsedArray[2][i];
        // Create a label for the checkbox
        const label = document.createElement('label');
        label.innerHTML += `
            <input type="checkbox" name="options" onclick=selectionClick(${i}) value="${i}">${content}`;
            airlineContainer.appendChild(label);
        airlineContainer.appendChild(document.createElement('br')); // Line break for spacing
    };
    const nextButtonAirline = document.createElement('button')
    nextButtonAirline.textContent = "Next";
    nextButtonAirline.addEventListener('click', () => {//event listener to make departures disappear
        // Code to execute when the button is clicked
        airlineContainer.setAttribute("style","display: none");
        dateContainer.setAttribute("style","display: block");
      });
      airlineContainer.appendChild(document.createElement('br')); // Line break for spacing
      airlineContainer.appendChild(nextButtonAirline);









     // Generate checkboxes for arrivals
     for(let i = 0; i<uniqueParsedArray[0].length & i<checkboxMax; i++){
        content = uniqueParsedArray[0][i];
        // Create a label for the checkbox
        const label = document.createElement('label');
        label.innerHTML += `
            <input type="checkbox" name="options" onclick=selectionClick(${i}) value="${i}">${content}`;
            dateContainer.appendChild(label);
            dateContainer.appendChild(document.createElement('br')); // Line break for spacing
    };
    const nextButtonDate = document.createElement('button')
    nextButtonDate.textContent = "Next";
    nextButtonDate.addEventListener('click', () => {//event listener to make departures disappear
        // Code to execute when the button is clicked
        dateContainer.setAttribute("style","display: none");
        
      });
      dateContainer.appendChild(document.createElement('br')); // Line break for spacing
    dateContainer.appendChild(nextButtonDate);

    

    //console.log(parsedArray);
}

function selectionClick(index){
    console.log(index + " was clicked")
}

